# Cortex Enterprise Configuration
# AI-powered development assistant for enterprise environments
# Version: 1.0.0

# ============================================================================
# GATEWAY SETTINGS
# ============================================================================
gateway:
  port: 18789
  mode: local
  bind: loopback  # Security: localhost only by default
  
  auth:
    mode: token
    
  tls:
    enabled: true
    autoGenerate: true
    
  controlUi:
    enabled: true
    allowInsecureAuth: false

# ============================================================================
# LOGGING & DIAGNOSTICS
# ============================================================================
logging:
  level: info
  consoleLevel: warn
  consoleStyle: json  # JSON logs for enterprise log aggregation
  redactSensitive: tools

diagnostics:
  enabled: true
  otel:
    enabled: false  # Enable for enterprise observability
    serviceName: cortex-enterprise
    traces: true
    metrics: true
    logs: true

# ============================================================================
# AGENT CONFIGURATION
# ============================================================================
agents:
  defaults:
    workspace: ~/workspace
    userTimezone: auto
    timeFormat: "24"
    contextTokens: 200000
    bootstrapMaxChars: 30000
    thinkingDefault: "low"
    verboseDefault: "off"
    
    memorySearch:
      enabled: true
      provider: openai
      sources:
        - memory
      sync:
        onSessionStart: true
        watch: true
        
    compaction:
      mode: safeguard
      memoryFlush:
        enabled: true
        
    subagents:
      maxConcurrent: 3
      archiveAfterMinutes: 60

  list:
    - id: enterprise
      name: "Enterprise Assistant"
      default: true
      workspace: ~/workspace
      
      identity:
        name: "Cortex"
        emoji: "ðŸ§ "
        
      tools:
        profile: full
        deny:
          - voice_call
          
      groupChat:
        historyLimit: 50

# ============================================================================
# TOOL CONFIGURATION
# ============================================================================
tools:
  profile: full
  deny:
    - voice_call
    
  web:
    search:
      enabled: true
      provider: brave
      maxResults: 10
      timeoutSeconds: 30
      
    fetch:
      enabled: true
      maxChars: 100000
      timeoutSeconds: 60
      
  exec:
    host: gateway
    security: allowlist
    ask: "on-miss"
    timeoutSec: 300
    safeBins:
      - cat
      - ls
      - pwd
      - grep
      - find
      - head
      - tail
      - wc
      - sort
      - uniq
      - git
      - npm
      - node
      - python3
      - cf
      - kubectl
      - docker
      
  message:
    crossContext:
      allowWithinProvider: true
      allowAcrossProviders: false
      marker:
        enabled: true

# ============================================================================
# ENTERPRISE CHANNELS
# ============================================================================
channels:
  slack:
    enabled: false
    dmPolicy: allowlist
    groupPolicy: allowlist
    configWrites: false
    
  msteams:
    enabled: false
    dmPolicy: allowlist
    groupPolicy: allowlist

# ============================================================================
# DISABLED CONSUMER CHANNELS
# ============================================================================
  telegram:
    enabled: false
  whatsapp:
    enabled: false
  signal:
    enabled: false
  imessage:
    enabled: false
  discord:
    enabled: false

# ============================================================================
# PLUGINS
# ============================================================================
plugins:
  enabled: true
  deny:
    - voice-call
    - telegram
    - whatsapp
    - signal
    - imessage
    - discord
    - nostr
    - twitch
    
  entries:
    slack:
      enabled: true
    msteams:
      enabled: true
    googlechat:
      enabled: true
    memory-core:
      enabled: true

# ============================================================================
# SESSION MANAGEMENT
# ============================================================================
session:
  scope: per-sender
  dmScope: per-channel-peer
  reset:
    mode: daily
    atHour: 3
  typingMode: thinking

# ============================================================================
# SCHEDULED JOBS
# ============================================================================
cron:
  enabled: true
  maxConcurrentRuns: 3

# ============================================================================
# WEBHOOKS
# ============================================================================
hooks:
  enabled: true
  maxBodyBytes: 1048576

# ============================================================================
# MEMORY
# ============================================================================
memory:
  backend: builtin
  citations: auto

# ============================================================================
# BROWSER AUTOMATION
# ============================================================================
browser:
  enabled: true
  headless: true
  evaluateEnabled: true

# ============================================================================
# SKILLS
# ============================================================================
skills:
  load:
    watch: true
  allowBundled:
    - github
    - coding-agent
    - 1password

# ============================================================================
# COMMANDS
# ============================================================================
commands:
  native: auto
  nativeSkills: auto
  text: true
  bash: false
  config: false
  restart: false
