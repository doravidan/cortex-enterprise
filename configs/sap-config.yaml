# Cortex SAP Configuration
# AI assistant optimized for SAP development workflows
# Version: 1.0.0

# ============================================================================
# SAP DEVELOPMENT ENVIRONMENT
# ============================================================================
agents:
  defaults:
    workspace: ~/sap-workspace
    bootstrapMaxChars: 50000
    contextTokens: 250000
    
    cliBackends:
      codex:
        command: codex
        args: ["--dangerously-auto-approve"]
        
  list:
    - id: sap-developer
      name: "SAP Development Assistant"
      default: true
      workspace: ~/sap-workspace
      
      identity:
        name: "Cortex SAP"
        emoji: "ðŸ’Ž"
        
      skills:
        - github
        - coding-agent
        - supabase

# ============================================================================
# SAP CLI TOOLS
# ============================================================================
tools:
  exec:
    host: gateway
    security: allowlist
    safeBins:
      # Standard tools
      - cat
      - ls
      - pwd
      - grep
      - find
      - git
      - npm
      - node
      - python3
      
      # SAP Cloud Foundry
      - cf
      
      # SAP CAP Development
      - cds
      - npx
      
      # SAP BTP / Kubernetes
      - kubectl
      - helm
      
      # SAP HANA
      - hdbsql
      
      # Docker
      - docker
      - docker-compose
      
      # Build Tools
      - mvn
      - gradle

# ============================================================================
# SAP MEMORY CONTEXT
# ============================================================================
memory:
  backend: builtin
  citations: "on"

agents:
  defaults:
    memorySearch:
      enabled: true
      provider: openai
      sources:
        - memory
      extraPaths:
        - ~/sap-workspace/docs
        - ~/sap-workspace/knowledge
      sync:
        onSessionStart: true
        watch: true
      query:
        maxResults: 10
        minScore: 0.6

# ============================================================================
# ENTERPRISE CHANNELS
# ============================================================================
channels:
  msteams:
    enabled: false
    dmPolicy: allowlist
    groupPolicy: allowlist
    
  slack:
    enabled: false
    dmPolicy: allowlist
    groupPolicy: allowlist

# ============================================================================
# SKILLS
# ============================================================================
skills:
  load:
    watch: true
    extraDirs:
      - ~/sap-workspace/skills
      
  entries:
    github:
      enabled: true
    coding-agent:
      enabled: true

# ============================================================================
# SCHEDULED JOBS
# ============================================================================
cron:
  enabled: true
  maxConcurrentRuns: 5

# ============================================================================
# SAP DEPLOYMENT WEBHOOKS
# ============================================================================
hooks:
  enabled: true
  mappings:
    - id: sap-deploy-webhook
      match:
        path: /sap/deploy
      action: agent
      messageTemplate: "SAP Deployment triggered: {{body.project}} to {{body.environment}}"
      
    - id: cap-build-webhook
      match:
        path: /cap/build
      action: agent
      messageTemplate: "CAP Build: {{body.status}} for {{body.service}}"

# ============================================================================
# SECURITY
# ============================================================================
gateway:
  auth:
    mode: token
    
  tls:
    enabled: true
    autoGenerate: true

logging:
  level: info
  consoleStyle: json
  redactSensitive: tools
  redactPatterns:
    - "password"
    - "token"
    - "api[_-]?key"
    - "secret"
    - "credential"

# ============================================================================
# DISABLED FEATURES
# ============================================================================
plugins:
  deny:
    - voice-call
    - telegram
    - whatsapp
    - signal
    - imessage
    - discord
    - nostr
    - twitch

commands:
  bash: false
  config: false
  restart: false
